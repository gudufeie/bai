(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbc621e4"],{"74d4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrap"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple search-bar",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("新增产品")]),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,multiple:"",limit:3,"on-exceed":t.handleExceed,"file-list":t.fileList,"auto-upload":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("导入产品")])],1)],1)])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple search-bar"},[a("span",[t._v("一级类目")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.getFirstCateId},model:{value:t.categoryOneId,callback:function(e){t.categoryOneId=e},expression:"categoryOneId"}},t._l(t.firstCateList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryName,value:t.id}})})),1)],1)]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple search-bar"},[a("span",[t._v("二级类目")]),a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.categoryTwoId,callback:function(e){t.categoryTwoId=e},expression:"categoryTwoId"}},t._l(t.secondCateList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryName,value:t.id}})})),1)],1)]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple search-bar"},[a("span",[t._v("产品来源")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productOrigin,callback:function(e){t.productOrigin=e},expression:"productOrigin"}},t._l(t.productOriginList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"grid-content bg-purple search"},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"id/名称/标签"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"id",label:"产品ID",width:"80"}}),a("el-table-column",{attrs:{label:"产品图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.productPic,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"productName",label:"产品名称",width:"120"}}),a("el-table-column",{attrs:{prop:"productPrice",label:"产品价格",width:"80"}}),a("el-table-column",{attrs:{prop:"categoryOneName",label:"一级类目",width:"100"}}),a("el-table-column",{attrs:{prop:"categoryTwoName",label:"二级类目"}}),a("el-table-column",{attrs:{prop:"keyWordName",label:"标签"}}),a("el-table-column",{attrs:{prop:"productSource",label:"产品来源",width:"80"}}),a("el-table-column",{attrs:{prop:"businessName",label:"商家名称",width:"120"}}),a("el-table-column",{attrs:{label:"所在地",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("getAddress")(a.province))+t._s(t._f("getAddress")(a.city))+t._s(t._f("getAddress")(a.area))+t._s(a.address)+" ")]}}])}),a("el-table-column",{attrs:{prop:"releaseTime",label:"发布时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(t._f("formatDate")(r.releaseTime)))])]}}])}),a("el-table-column",{attrs:{label:"发布状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(1==r.enabled?"启用":"下线"))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"管理",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleView(r)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleOnOrOut(r)}}},[t._v(t._s(1==r.enabled?"下线":"启用"))]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleDelete(r)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.pageNum,"page-sizes":[10,25,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal,"prev-text":"上一页","next-text":"下一页"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])],1)],1)},n=[],o=(a("a4d3"),a("e01a"),a("d28b"),a("99af"),a("0d03"),a("b0c0"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("8bc4")),l=a("1273"),i={data:function(){return{pageNum:1,pageSize:10,pageTotal:1,searchName:"",value:"",tableData:[],fileList:[],firstCateList:[],secondCateList:[],categoryOneId:"",categoryTwoId:"",productOrigin:"",productOriginList:[{value:"",label:"全部"},{value:1,label:"外部"},{value:2,label:"服务商发布"},{value:3,label:"人工采编"}]}},mounted:function(){this.getAllCate(),this.getProductList()},filters:{getAddress:function(t){var e="";return t&&(e=o["CodeToText"][t]),e}},methods:{handleSizeChange:function(){},handleCurrentChange:function(t){this.pageNum=t,this.getProductList()},search:function(){var t=this,e={categoryOneId:this.categoryOneId,categoryTwoId:this.categoryTwoId,pageNum:this.pageNum,pageSize:this.pageSize,productSource:this.productOrigin,proudctKeyWord:this.searchName};Object(l["cb"])(e).then((function(e){e.data.dataList&&(t.tableData=e.data.dataList,t.pageTotal=e.data.totalCount)}))},getAllCate:function(){var t=this;Object(l["O"])({}).then((function(e){t.firstCateList=e.data}))},getFirstCateId:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=this.firstCateList[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;if(o.id==this.categoryOneId.toString()){this.categoryTwoId="",this.secondCateList=o.childrenList;break}}}catch(l){e=!0,a=l}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}},getProductList:function(){var t=this,e={categoryOneId:"",categoryTwoId:"",pageNum:this.pageNum,pageSize:this.pageSize,productSource:"",proudctKeyWord:""};Object(l["cb"])(e).then((function(e){e.data.dataList&&(t.tableData=e.data.dataList,t.pageTotal=e.data.totalCount)}))},handleView:function(t){this.$store.commit("saveProductInfo",t),this.$router.push({path:"/productDetail"})},handleOnOrOut:function(t){var e=this,a=Math.abs(t.enabled-1),r={id:t.id,enabled:a};Object(l["pb"])(r).then((function(t){200==t.code?e.getProductList():e.$message.warning(t.msg)}))},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["nb"])({id:t.id}).then((function(t){200==t.code?(e.$message({type:"success",message:"删除成功!"}),e.getProductList()):e.$message.warning(t.msg)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addProduct:function(){this.$router.push({name:"productDetail"})},handleRemove:function(t,e){},handlePreview:function(t){},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))}}},c=i,s=(a("822f"),a("2877")),u=Object(s["a"])(c,r,n,!1,null,"54c6e508",null);e["default"]=u.exports},"822f":function(t,e,a){"use strict";var r=a("a630"),n=a.n(r);n.a},8418:function(t,e,a){"use strict";var r=a("c04e"),n=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var l=r(e);l in t?n.f(t,l,o(0,a)):t[l]=a}},"99af":function(t,e,a){"use strict";var r=a("23e7"),n=a("d039"),o=a("e8b5"),l=a("861d"),i=a("7b0b"),c=a("50c4"),s=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),h=a("60ae"),g=p("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",m=h>=51||!n((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),v=d("concat"),y=function(t){if(!l(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)},w=!m||!v;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,r,n,o,l=i(this),d=u(l,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?l:arguments[e],y(o)){if(n=c(o.length),p+n>f)throw TypeError(b);for(a=0;a<n;a++,p++)a in o&&s(d,p,o[a])}else{if(p>=f)throw TypeError(b);s(d,p++,o)}return d.length=p,d}})},a630:function(t,e,a){},b0c0:function(t,e,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,l=o.toString,i=/^\s*function ([^ (]*)/,c="name";!r||c in o||n(o,c,{configurable:!0,get:function(){try{return l.call(this).match(i)[1]}catch(t){return""}}})}}]);