(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1931f222"],{4570:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrap"},[a("div",{staticClass:"top-floor"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple title"},[t._v("顶部楼层")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple search-bar",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.toTopFloor}},[t._v("新增楼层")])],1)])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.topdata,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"navigationTitle",label:"配置词",width:"120"}}),a("el-table-column",{attrs:{prop:"typeName",label:"跳转类型",width:"120"}}),a("el-table-column",{attrs:{prop:"description",label:"内容"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80"}}),a("el-table-column",{attrs:{label:"发布状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("1"==e.row.enable?"已上线":"已下线")+" ")]}}])}),a("el-table-column",{attrs:{label:"最近更新时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatDate")(e.row.updateTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"管理",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleTopEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleTopOffline(e.$index,e.row)}}},[t._v(t._s("1"==e.row.enable?"下线":"上线"))]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleTopDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)])],1)],1),a("div",{staticClass:"distribution-floor"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple title"},[t._v("分发楼层")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple search-bar",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.toDistributeDetail}},[t._v("新增楼层")])],1)])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.dispenseContent,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"navigationTitle",label:"配置词",width:"120"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"发布状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(1==n.enable?"已上线":"已下线"))])]}}])}),a("el-table-column",{attrs:{label:"最近更新时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("formatDate")(n.updateTime)))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"管理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,i=e.$index;return[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.dispenseUpdate(n,i)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.dispenseOnOrOut(n,i)}}},[t._v(t._s(1==n.enable?"下线":"上线"))]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.dispenseDelete(n,i)}}},[t._v("删除")])]}}])})],1)],1)])],1)],1),a("div",{staticClass:"solution"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple title"},[t._v("行业解决方案")])])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"解决方案",name:"first"}},[a("div",{staticClass:"search-nav"},[a("span",[t._v("导航")]),a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.filterSolution},model:{value:t.navigationId,callback:function(e){t.navigationId=e},expression:"navigationId"}},t._l(t.navigationList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.navigationName,value:t.id}})})),1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.toSolutionDetail}},[t._v("新增解决方案")])],1),a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.industrySolutionList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"id",label:"解决方案ID",width:"100"}}),a("el-table-column",{attrs:{prop:"solutionName",label:"解决方案名称"}}),a("el-table-column",{attrs:{prop:"categoryName",label:"二级类目",width:"120"}}),a("el-table-column",{attrs:{label:"是否推荐",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(1==n.recommend?"人工推荐":2==n.recommend?"系统推荐":"否"))])]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80"}}),a("el-table-column",{attrs:{label:"发布状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(1==n.enable?"已上线":"已下线"))])]}}])}),a("el-table-column",{attrs:{label:"最近更新时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("formatDate")(n.updateTime)))])]}}])}),a("el-table-column",{attrs:{label:"管理",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.solutionEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.solutionOnOrOut(e.$index,e.row)}}},[t._v(t._s(1==e.row.enable?"下线":"上线"))]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.solutionDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.solutionPageNum,"page-sizes":[10,25,50],"page-size":t.solutionPageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.solutionTotal,"prev-text":"上一页","next-text":"下一页"},on:{"size-change":t.solutionSizeChange,"current-change":t.solutionCurrentChange}})],1)],1)]),a("el-tab-pane",{attrs:{label:"导航排序",name:"second"}},[a("div",{staticClass:"add-nav"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addNavigation}},[t._v("新增导航")])],1),a("div",{staticClass:"grid-content bg-purple-dark"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.navigationList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{label:"导航名称"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,i=e.$index;return[t.showEdit[i]&&"0"!=n.categoryTwoId?a("el-input",{staticClass:"nav-input",model:{value:n.navigationName,callback:function(e){t.$set(n,"navigationName",e)},expression:"row.navigationName"}}):t._e(),"0"==n.categoryTwoId?a("span",[t._v(t._s(n.navigationName))]):t._e(),t.showEdit[i]||"0"==n.categoryTwoId?t._e():a("span",[t._v(t._s(n.navigationName))])]}}])}),a("el-table-column",{attrs:{label:"二级类目",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,i=e.$index;return[t.showEdit[i]&&"0"!=n.categoryTwoId?a("el-select",{staticClass:"nav-input",attrs:{placeholder:"请选择"},model:{value:n.categoryTwoId,callback:function(e){t.$set(n,"categoryTwoId",e)},expression:"row.categoryTwoId"}},t._l(t.cateTwoKeywords,(function(t,e){return a("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})})),1):t._e(),"0"==n.categoryTwoId?a("span",[t._v("/")]):t._e(),t.showEdit[i]||"0"==n.categoryTwoId?t._e():a("span",[t._v(t._s(n.categoryName))])]}}])}),a("el-table-column",{attrs:{label:"排序",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,i=e.$index;return[t.showEdit[i]&&"0"!=n.categoryTwoId?a("el-input",{staticClass:"nav-input",model:{value:n.sort,callback:function(e){t.$set(n,"sort",e)},expression:"row.sort"}}):t._e(),"0"==n.categoryTwoId?a("span",[t._v("/")]):t._e(),t.showEdit[i]||"0"==n.categoryTwoId?t._e():a("span",[t._v(t._s(n.sort))])]}}])}),a("el-table-column",{attrs:{label:"发布状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(2==n.publishState?"已上线":3==n.publishState?"已下线":"未上线"))])]}}])}),a("el-table-column",{attrs:{label:"最近更新时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t._f("formatDate")(n.lastUpdateTime)))])]}}])}),a("el-table-column",{attrs:{label:"管理",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.$index,i=e.row;return[t.showBtn[n]||"0"!=i.categoryTwoId?t._e():a("el-button",{staticClass:"disable_btn",attrs:{size:"mini",disabled:"true"}},[t._v("编辑")]),t.showBtn[n]||"0"==i.categoryTwoId?t._e():a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.navEdit(n,i)}}},[t._v("编辑")]),t.showBtn[n]&&"0"!=i.categoryTwoId?a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.navSubmit(n,i)}}},[t._v("保存")]):t._e(),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.navOnOrout(n,i)}}},[t._v(t._s(2==i.publishState?"下线":"上线"))]),"0"!=i.categoryTwoId?a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.navDelete(n,i)}}},[t._v("删除")]):t._e(),"0"==i.categoryTwoId?a("el-button",{staticClass:"disable_btn",attrs:{size:"mini",disabled:"true"}},[t._v("删除")]):t._e()]}}])})],1)],1)])],1)],1)],1)],1)])},i=[],o=(a("a4d3"),a("e01a"),a("d28b"),a("4e82"),a("d3b7"),a("3ca3"),a("ddb0"),a("1273")),s={data:function(){return{topdata:"",topCategory:{},dispenseContent:{},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:"",tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],fileList:[],activeName:"first",firstCateList:[],industrySolutionList:[],solutionPageNum:1,solutionPageSize:10,solutionTotal:1,navigationList:[],navigation:{},navigationId:"",showEdit:[],showBtn:[],addFlag:!1,cateTwoKeywords:[],mode:"add",categoryTwoId:""}},created:function(){this.init()},mounted:function(){for(var t=this,e=0;e<this.navigationList.length;e++)this.showEdit[e]=!1,this.showBtn[e]=!1;Object(o["O"])({}).then((function(e){if(e.data){t.firstCateList=e.data;var a=!0,n=!1,i=void 0;try{for(var o,s=e.data[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;if("行业解决方案"==l.categoryName){t.cateTwoKeywords=l.childrenList;break}}}catch(r){n=!0,i=r}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}}}))},methods:{init:function(){var t=this,e={};Object(o["K"])(e).then((function(e){t.topdata=e.data})),Object(o["G"])(e).then((function(e){t.dispenseContent=e.data})),this.getIndustrySolution(),this.getAllNav()},handleTopEdit:function(t,e){this.$local.clear("topEditData"),this.$local.set("topEditData",JSON.stringify(e)),this.$router.push({path:"/topFloorDetail",query:{id:1}})},handleTopOffline:function(t,e){var a=this,n=e.enable;n=1==n?0:1;var i={id:e.id,enable:n};Object(o["o"])(i).then((function(t){a.init()}))},handleTopDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该楼层, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["y"])({id:e.id}).then((function(t){200==t.code&&(a.$message.success("删除成功"),a.init())}))})).catch((function(){a.$message.info("已取消删除")}))},dispenseOnOrOut:function(t,e){var a=this,n=Math.abs(t.enable-1),i={id:t.id,enable:n};Object(o["o"])(i).then((function(t){a.init()}))},dispenseDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该楼层, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["y"])({id:t.id}).then((function(t){200==t.code&&(a.$message.success("删除成功"),a.init())}))})).catch((function(){a.$message.info("已取消删除")}))},handleSizeChange:function(){},handleClick:function(t,e){console.log(t,e)},toTopFloor:function(){this.$router.push({path:"/topFloorDetail",query:{id:2}})},toDistributeDetail:function(){this.$router.push({path:"/distributeFloorDetail"})},toSolutionDetail:function(){this.$router.push({path:"/solutionDetail"})},dispenseUpdate:function(t,e){this.$store.commit("saveDispenseDetail",t),this.$router.push({path:"/distributeFloorDetail"})},getIndustrySolution:function(){var t=this,e={categoryTwoId:this.categoryTwoId,pageNum:this.solutionPageNum,pageSize:this.solutionPageSize};Object(o["W"])(e).then((function(e){200==e.code&&(t.industrySolutionList=e.data.dataList,t.solutionTotal=e.data.totalCount,t.solutionPageNum>e.data.totalPage&&e.data.totalPage>1?(t.solutionPageNum=e.data.totalPage-1,t.getIndustrySolution()):t.solutionPageNum>e.data.totalPage&&1==e.data.totalPage&&(t.solutionPageNum=1,t.getIndustrySolution()))}))},solutionSizeChange:function(t){this.solutionPageSize=t,this.getIndustrySolution()},solutionCurrentChange:function(t){this.solutionPageNum=t,this.getIndustrySolution()},getAllNav:function(){var t=this;Object(o["P"])({}).then((function(e){t.navigationList=e.data}))},solutionEdit:function(t,e){this.$store.commit("saveSolutionInfo",e),this.$router.push("/solutionDetail")},filterSolution:function(){this.categoryTwoId="";var t=!0,e=!1,a=void 0;try{for(var n,i=this.navigationList[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.navigationId==o.id&&(this.categoryTwoId=o.categoryTwoId)}}catch(s){e=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}this.getIndustrySolution()},solutionOnOrOut:function(t,e){var a=this,n=Math.abs(e.enable-1),i={id:e.id,enable:n};Object(o["Lb"])(i).then((function(t){200==t.code&&a.getIndustrySolution()}))},solutionDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该解决方案, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["x"])({id:e.id}).then((function(t){200==t.code&&(a.$message.success("删除成功"),a.getIndustrySolution())}))})).catch((function(){a.$message.info("已取消删除")}))},navEdit:function(t,e){this.showEdit[t]=!0,this.showBtn[t]=!0,this.$set(this.showEdit,t,!0),this.$set(this.showBtn,t,!0),this.mode="edit"},navSubmit:function(t,e){var a=this;if(this.showEdit[t]=!1,this.showBtn[t]=!1,this.$set(this.showEdit,t,!1),this.$set(this.showBtn,t,!1),!e.navigationName)return this.$message.warning("请输入导航名称"),!1;if(!e.categoryTwoId)return this.$message.warning("选择二级类目"),!1;if(!e.sort)return this.$message.warning("请输入排序"),!1;var n={id:e.id,navigationName:e.navigationName,categoryTwoId:e.categoryTwoId,sort:e.sort};Object(o["g"])(n).then((function(t){200==t.code?("add"==a.mode?a.$message.success("添加成功"):a.$message.success("修改成功"),a.getAllNav()):a.$message.warning(t.msg)}))},navOnOrout:function(t,e){var a=this;2==e.publishState?e.publishState=3:(e.publishState,e.publishState=2);var n={id:e.id,publishState:e.publishState};Object(o["Hb"])(n).then((function(t){200==t.code?a.getAllNav():a.$message.warning(t.msg)}))},navDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该导航, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["u"])({id:e.id}).then((function(t){200==t.code&&(a.$message.success("删除成功"),a.getAllNav())}))})).catch((function(){a.$message.info("已取消删除")}))},addNavigation:function(){this.mode="add",this.addFlag=!0,this.navigationList.push({id:"",categoryTwoId:"",navigationName:"",sort:"",publishState:1}),this.showEdit[this.navigationList.length-1]=!0,this.showBtn[this.navigationList.length-1]=!0,this.$set(this.showEdit,this.navigationList.length-1,!0),this.$set(this.showBtn,this.navigationList.length-1,!0)}}},l=s,r=(a("bba8"),a("bacb"),a("2877")),u=Object(r["a"])(l,n,i,!1,null,"da90dd12",null);e["default"]=u.exports},"4e82":function(t,e,a){"use strict";var n=a("23e7"),i=a("1c0b"),o=a("7b0b"),s=a("d039"),l=a("b301"),r=[].sort,u=[1,2,3],c=s((function(){u.sort(void 0)})),d=s((function(){u.sort(null)})),h=l("sort"),b=c||!d||h;n({target:"Array",proto:!0,forced:b},{sort:function(t){return void 0===t?r.call(o(this)):r.call(o(this),i(t))}})},bacb:function(t,e,a){"use strict";var n=a("f09a"),i=a.n(n);i.a},bba8:function(t,e,a){"use strict";var n=a("f94e"),i=a.n(n);i.a},f09a:function(t,e,a){},f94e:function(t,e,a){}}]);