(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a44ae33e"],{1734:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrap"},[a("form",{attrs:{action:"",method:"post",enctype:"multipart/form-data"}},[a("el-row",{attrs:{gutter:20}},[t.idShow?a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("ID:")]),a("span",[t._v(t._s(t.productDetailInfo.id))])])]):t._e(),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("产品首图"),a("span",{staticClass:"star"},[t._v("*")]),t._v(":")]),a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.productDetailInfo.productPic,fit:t.fit}}),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("产品名称"),a("span",{staticClass:"star"},[t._v("*")]),t._v(":")]),a("el-input",{staticClass:"status_type",attrs:{placeholder:"30个字以内",maxlength:"30","show-word-limit":""},model:{value:t.productDetailInfo.productName,callback:function(e){t.$set(t.productDetailInfo,"productName",e)},expression:"productDetailInfo.productName"}})],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark price"},[a("span",{staticClass:"status_type title"},[t._v("产品价格"),a("span",{staticClass:"star"},[t._v("*")]),t._v(":")]),a("el-input",{staticClass:"status_type",attrs:{placeholder:"请输入价格"},on:{input:t.getPrice},model:{value:t.productDetailInfo.productPrice,callback:function(e){t.$set(t.productDetailInfo,"productPrice",e)},expression:"productDetailInfo.productPrice"}}),a("span",{staticClass:"tipSpan"},[t._v(t._s(t.priceTip))])],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("一级类目"),a("span",{staticClass:"star"},[t._v("*")]),t._v(":")]),a("el-select",{attrs:{placeholder:"请选择一级类目"},on:{change:t.getFirstCateId},model:{value:t.productDetailInfo.categoryOneId,callback:function(e){t.$set(t.productDetailInfo,"categoryOneId",e)},expression:"productDetailInfo.categoryOneId"}},t._l(t.firstCateList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})})),1)],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("二级类目"),a("span",{staticClass:"star"},[t._v("*")]),t._v(":")]),a("el-select",{attrs:{placeholder:"请选择二级类目"},model:{value:t.productDetailInfo.categoryTwoId,callback:function(e){t.$set(t.productDetailInfo,"categoryTwoId",e)},expression:"productDetailInfo.categoryTwoId"}},t._l(t.secondCateList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})})),1)],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("标签:")]),a("span",{staticClass:"status_type",staticStyle:{width:"80%"}},[a("tags-add",{attrs:{tags:t.productDetailInfo.keyWordName,tagsId:t.productDetailInfo.keyWordId},on:{getNewTags:t.getNewTags}})],1)])]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("产品来源:")]),a("el-select",{model:{value:t.productDetailInfo.productSource,callback:function(e){t.$set(t.productDetailInfo,"productSource",e)},expression:"productDetailInfo.productSource"}},t._l(t.originList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("商家ID:")]),a("el-input",{staticClass:"status_type",attrs:{placeholder:"请输入内容"},on:{blur:t.getbusiness},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getbusiness(e)}},model:{value:t.productDetailInfo.businessId,callback:function(e){t.$set(t.productDetailInfo,"businessId",e)},expression:"productDetailInfo.businessId"}})],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("商家名称"),a("span",{staticClass:"star"},[t._v("*")]),t._v(":")]),a("business-search",{staticStyle:{width:"80%"},attrs:{businessName:t.productDetailInfo.businessName},on:{getName:t.getName,getBusiness:t.businessSelect}})],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("所在地:")]),a("el-cascader",{attrs:{size:"large",options:t.options},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}}),a("br")],1),a("div",{staticClass:"grid-content bg-purple-dark",staticStyle:{"text-align":"right"}},[a("span",{staticClass:"status_type title"}),a("el-input",{staticStyle:{width:"77%"},attrs:{placeholder:"请输入详细地址"},model:{value:t.productDetailInfo.address,callback:function(e){t.$set(t.productDetailInfo,"address",e)},expression:"productDetailInfo.address"}})],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type title"},[t._v("发布时间:")]),a("span",{staticClass:"status_type"},[t._v(t._s(t.productDetailInfo.releaseTime))])])]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark status"},[a("span",{staticClass:"status_type title"},[t._v("是否启用:")]),a("el-select",{attrs:{placeholder:"请选择二级类目"},model:{value:t.productDetailInfo.enabled,callback:function(e){t.$set(t.productDetailInfo,"enabled",e)},expression:"productDetailInfo.enabled"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark hrefType"},[a("span",{staticClass:"status_type title"},[t._v("跳转类型:")]),a("span",{staticClass:"status_type"},[a("el-select",{staticStyle:{width:"30%"},on:{change:t.linkChange},model:{value:t.productDetailInfo.forwardType,callback:function(e){t.$set(t.productDetailInfo,"forwardType",e)},expression:"productDetailInfo.forwardType"}},t._l(t.hrefTypeList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{directives:[{name:"show",rawName:"v-show",value:"2"==t.productDetailInfo.forwardType,expression:"productDetailInfo.forwardType == '2'"}],attrs:{placeholder:"请填写html地址"},model:{value:t.productDetailInfo.forwardUrl,callback:function(e){t.$set(t.productDetailInfo,"forwardUrl",e)},expression:"productDetailInfo.forwardUrl"}})],1)])]),a("el-col",{attrs:{span:18,offset:6}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("span",{staticClass:"status_type detail"},[t._v("产品详情:")]),a("span",{staticClass:"status_type"},[a("vue-editor",{on:{blur:t.getDetail},model:{value:t.productDetailInfo.productDetail,callback:function(e){t.$set(t.productDetailInfo,"productDetail",e)},expression:"productDetailInfo.productDetail"}})],1)])]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark",staticStyle:{"justify-content":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),a("el-button",{attrs:{type:"primary"},on:{click:t.publish}},[t._v("确认发布")]),a("el-button",{on:{click:t.back}},[t._v("取消")]),"edit"==t.mode?a("el-button",{on:{click:t.deleteProduct}},[t._v("删除")]):t._e()],1)])],1)],1)])},i=[],o=(a("a4d3"),a("e01a"),a("d28b"),a("0d03"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d"),a("8bc4")),n=a("7457"),l=a("3d97"),r=a("9af9"),c=a("1273"),u={data:function(){return{productDetailInfo:{categoryOneId:"",categoryTwoId:"",id:"",productName:"",productPrice:"",productSource:"",businessId:"",businessName:"",address:"",releaseTime:"",forwardType:"",forwardUrl:"",productDetail:"",province:"",city:"",area:"",keyWordId:"",keyWordName:"",productPic:"",publish:"0"},priceTip:"",content:"",fit:"",input:"",url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",name:"",status:1,relateKeywordList:[],inputVisible:!1,inputValue:"",firstCateList:[],secondCateList:[],updateTime:"",statusList:[{label:"是",value:1},{label:"否",value:0}],relationName:"",keyWordRelationname:[],keyworkId:"",key:{},hrefTypeList:[{label:"固定链接",value:"1"},{label:"默认(有联系方式跳转详情,无联系方式跳转站外)",value:"2"}],options:o["regionData"],selectedOptions:[],productOrigin:"1",originList:[{label:"外部",value:"1"},{label:"服务商发布",value:"2"},{label:"人工采编",value:"3"}],imageUrl:"",defaultLink:!1,tagDialogVisible:!1,idShow:!1,mode:"add"}},components:{VueEditor:n["a"],BusinessSearch:l["a"],TagsAdd:r["a"]},computed:{productInfo:function(){return this.$store.state.productInfo}},mounted:function(){this.productInfo.id&&(this.mode="edit",this.idShow=!0,this.getProductDetail(this.productInfo.id),this.$store.commit("saveProductInfo","")),this.getAllCate()},methods:{handleChange:function(t){this.productDetailInfo.province=t[0],this.productDetailInfo.city=t[1],this.productDetailInfo.area=t[2]},getAllCate:function(){var t=this;Object(c["O"])({}).then((function(e){t.firstCateList=e.data}))},getFirstCateId:function(){var t=!0,e=!1,a=void 0;try{for(var s,i=this.firstCateList[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var o=s.value;if(o.id==this.productDetailInfo.categoryOneId.toString()){this.productDetailInfo.categoryTwoId="",this.secondCateList=o.childrenList;break}}}catch(n){e=!0,a=n}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}},getProductDetail:function(t){var e=this;Object(c["ab"])({id:t}).then((function(t){e.productDetailInfo=t.data,e.selectedOptions=[e.productDetailInfo.province,e.productDetailInfo.city,e.productDetailInfo.area]}))},getDetail:function(){console.log("ooooo",this.content)},back:function(){this.$router.go(-1)},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,s=t.size/1024<30;return e||a||this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 30k!"),e&&s},linkChange:function(){this.defaultLink=this.hrefType},getTag:function(){},save:function(){var t=this;this.productDetailInfo.productPic=this.url,this.productDetailInfo.publish="0",this.productDetailInfo.id?Object(c["nb"])(this.productDetailInfo).then((function(e){200==e.code?(t.$message.success("修改成功"),t.$router.push("/product")):t.$message.warning(e.msg)})):Object(c["lb"])(this.productDetailInfo).then((function(e){200==e.code?(t.$message.success("添加成功"),t.$router.push({path:"/product"})):t.$message.warning(e.msg)}))},publish:function(){this.productDetailInfo.publish="1",this.save()},deleteProduct:function(){var t=this;this.$confirm("此操作将永久删除该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["mb"])({id:t.productDetailInfo.id}).then((function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),t.$router.push("/product")):t.$message.warning(e.msg)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getPrice:function(){var t=this;this.$rules.validatePrice(this.productDetailInfo.productPrice,(function(e){t.priceTip=e}))},getbusiness:function(){var t=this,e={id:this.productDetailInfo.businessId,businessName:""};Object(c["pb"])(e).then((function(e){t.productDetailInfo.businessName=e.data[0].businessName}))},getName:function(t){this.productDetailInfo.businessName=t},businessSelect:function(t){this.productDetailInfo.businessName=t.value,this.productDetailInfo.businessId=t.id},getNewTags:function(t,e){this.productDetailInfo.keyWordId=e,this.productDetailInfo.keyWordName=t,this.productDetailInfo.keyWordName.length>0&&(this.productDetailInfo.keyWordName=this.productDetailInfo.keyWordName.substring(0,this.productDetailInfo.keyWordName.length-1),this.productDetailInfo.keyWordId=e.substring(0,t.length-1))}}},d=u,p=(a("e1e7"),a("2877")),f=Object(p["a"])(d,s,i,!1,null,"54fa4212",null);e["default"]=f.exports},"2a4b":function(t,e,a){},e1e7:function(t,e,a){"use strict";var s=a("2a4b"),i=a.n(s);i.a}}]);