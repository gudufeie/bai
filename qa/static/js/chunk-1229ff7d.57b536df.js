(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1229ff7d"],{"54ef":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-wrap"},[s("form",{attrs:{action:"",method:"post",enctype:"multipart/form-data"}},[s("el-row",{attrs:{gutter:20}},[e.idShow?s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("服务ID:")]),s("span",[e._v(e._s(e.serviceDetailInfo.id))])])]):e._e(),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("服务首图"),s("span",{staticClass:"star"},[e._v("*")]),e._v(":")]),s("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.serviceDetailInfo.servicePic,fit:e.fit}}),s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("服务名称"),s("span",{staticClass:"star"},[e._v("*")]),e._v(":")]),s("el-input",{staticClass:"status_type",attrs:{placeholder:"30个字以内",maxlength:"30","show-word-limit":""},model:{value:e.serviceDetailInfo.serviceName,callback:function(t){e.$set(e.serviceDetailInfo,"serviceName",t)},expression:"serviceDetailInfo.serviceName"}})],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark price"},[s("span",{staticClass:"status_type title"},[e._v("服务价格"),s("span",{staticClass:"star"},[e._v("*")]),e._v(":")]),s("el-input",{staticClass:"status_type",attrs:{placeholder:"请输入价格"},on:{input:e.getPrice},model:{value:e.serviceDetailInfo.servicePrice,callback:function(t){e.$set(e.serviceDetailInfo,"servicePrice",t)},expression:"serviceDetailInfo.servicePrice"}}),s("span",{staticClass:"tipSpan"},[e._v(e._s(e.priceTip))])],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("一级类目"),s("span",{staticClass:"star"},[e._v("*")]),e._v(":")]),s("el-select",{attrs:{placeholder:"请选择一级类目"},on:{change:e.getFirstCateId},model:{value:e.serviceDetailInfo.categoryOneId,callback:function(t){e.$set(e.serviceDetailInfo,"categoryOneId",t)},expression:"serviceDetailInfo.categoryOneId"}},e._l(e.firstCateList,(function(e,t){return s("el-option",{key:t,attrs:{label:e.categoryName,value:e.id}})})),1)],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("二级类目"),s("span",{staticClass:"star"},[e._v("*")]),e._v(":")]),s("el-select",{attrs:{placeholder:"请选择二级类目"},on:{change:e.getSecondCate},model:{value:e.serviceDetailInfo.categoryTwoId,callback:function(t){e.$set(e.serviceDetailInfo,"categoryTwoId",t)},expression:"serviceDetailInfo.categoryTwoId"}},e._l(e.secondCateList,(function(e,t){return s("el-option",{key:t,attrs:{label:e.categoryName,value:e.id}})})),1)],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("标签:")]),s("span",{staticClass:"status_type",staticStyle:{width:"80%"}},[s("tags-add",{attrs:{tags:e.serviceDetailInfo.keyWordName,tagsId:e.serviceDetailInfo.keyWordId},on:{getNewTags:e.getNewTags}})],1)])]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("商家ID:")]),s("el-input",{staticClass:"status_type",attrs:{placeholder:"请输入内容"},on:{blur:e.getbusiness},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getbusiness(t)}},model:{value:e.serviceDetailInfo.businessId,callback:function(t){e.$set(e.serviceDetailInfo,"businessId",t)},expression:"serviceDetailInfo.businessId"}})],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("商家名称"),s("span",{staticClass:"star"},[e._v("*")]),e._v(":")]),s("business-search",{staticStyle:{width:"80%"},attrs:{businessName:e.serviceDetailInfo.businessName},on:{getName:e.getName,getBusiness:e.businessSelect}})],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("所在地:")]),s("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),s("br")],1),s("div",{staticClass:"grid-content bg-purple-dark",staticStyle:{"text-align":"right"}},[s("span",{staticClass:"status_type title"}),s("el-input",{staticStyle:{width:"77%"},attrs:{placeholder:"请输入详细地址"},model:{value:e.serviceDetailInfo.address,callback:function(t){e.$set(e.serviceDetailInfo,"address",t)},expression:"serviceDetailInfo.address"}})],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type title"},[e._v("发布时间:")]),s("span",{staticClass:"status_type"},[e._v(e._s(e.serviceDetailInfo.releaseTime))])])]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark status"},[s("span",{staticClass:"status_type title"},[e._v("是否启用:")]),s("el-select",{attrs:{placeholder:"请选择二级类目"},model:{value:e.serviceDetailInfo.enabled,callback:function(t){e.$set(e.serviceDetailInfo,"enabled",t)},expression:"serviceDetailInfo.enabled"}},e._l(e.statusList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark hrefType"},[s("span",{staticClass:"status_type title"},[e._v("跳转类型:")]),s("span",{staticClass:"status_type"},[s("el-select",{staticStyle:{width:"30%"},on:{change:e.linkChange},model:{value:e.serviceDetailInfo.forwardType,callback:function(t){e.$set(e.serviceDetailInfo,"forwardType",t)},expression:"serviceDetailInfo.forwardType"}},e._l(e.hrefTypeList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),s("el-input",{directives:[{name:"show",rawName:"v-show",value:"2"==e.serviceDetailInfo.forwardType,expression:"serviceDetailInfo.forwardType == '2'"}],attrs:{placeholder:"请填写html地址"},model:{value:e.serviceDetailInfo.forwardUrl,callback:function(t){e.$set(e.serviceDetailInfo,"forwardUrl",t)},expression:"serviceDetailInfo.forwardUrl"}})],1)])]),s("el-col",{attrs:{span:18,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark"},[s("span",{staticClass:"status_type detail"},[e._v("服务详情:")]),s("span",{staticClass:"status_type"},[s("vue-editor",{on:{blur:e.getDetail},model:{value:e.serviceDetailInfo.serviceDetail,callback:function(t){e.$set(e.serviceDetailInfo,"serviceDetail",t)},expression:"serviceDetailInfo.serviceDetail"}})],1)])]),s("el-col",{attrs:{span:12,offset:6}},[s("div",{staticClass:"grid-content bg-purple-dark",staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),s("el-button",{attrs:{type:"primary"},on:{click:e.publish}},[e._v("确认发布")]),s("el-button",{on:{click:e.back}},[e._v("取消")]),"edit"==e.mode?s("el-button",{on:{click:e.serviceDelete}},[e._v("删除")]):e._e()],1)])],1)],1)])},i=[],n=(s("a4d3"),s("e01a"),s("d28b"),s("0d03"),s("d3b7"),s("25f0"),s("3ca3"),s("ddb0"),s("2b3d"),s("8bc4")),r=s("7457"),l=s("3d97"),c=s("9af9"),o=s("1273"),d={data:function(){return{serviceDetailInfo:{address:"",area:"",businessId:"",businessName:"",categoryOneId:"",categoryOneName:"",categoryTwoId:"",categoryTwoName:"",city:"",enabled:0,forwardType:"",forwardUrl:"",id:"",keyWordId:"",keyWordName:"",province:"",publish:"0",releaseTime:"",serviceDetail:"",serviceName:"",servicePic:"",servicePrice:""},priceTip:"",content:"",fit:"",input:"",url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",name:"",status:1,relateKeywordList:[],inputVisible:!1,inputValue:"",firstCateList:[],secondCateList:[],updateTime:"",statusList:[{label:"是",value:1},{label:"否",value:0}],relationName:"",keyWordRelationname:[],keyworkId:"",key:{},hrefTypeList:[{label:"固定链接",value:"1"},{label:"默认(有联系方式跳转详情,无联系方式跳转站外)",value:"2"}],options:n["regionData"],selectedOptions:[],imageUrl:"",defaultLink:!1,tagDialogVisible:!1,idShow:!1,mode:"add"}},components:{VueEditor:r["a"],BusinessSearch:l["a"],TagsAdd:c["a"]},computed:{serviceInfo:function(){return this.$store.state.serviceInfo}},mounted:function(){this.serviceInfo.id&&(this.mode="edit",this.idShow=!0,this.getServiceDetail(this.serviceInfo.id),this.$store.commit("saveServiceInfo","")),this.getAllCate()},methods:{handleChange:function(e){this.serviceDetailInfo.province=e[0],this.serviceDetailInfo.city=e[1],this.serviceDetailInfo.area=e[2]},getAllCate:function(){var e=this;Object(o["x"])({}).then((function(t){if(e.firstCateList=t.data,e.serviceDetailInfo.categoryOneId){var s=!0,a=!1,i=void 0;try{for(var n,r=e.firstCateList[Symbol.iterator]();!(s=(n=r.next()).done);s=!0){var l=n.value;if(l.id==e.serviceDetailInfo.categoryOneId.toString()){e.secondCateList=l.childrenList;break}}}catch(c){a=!0,i=c}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}}}))},getFirstCateId:function(){var e=!0,t=!1,s=void 0;try{for(var a,i=this.firstCateList[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.id==this.serviceDetailInfo.categoryOneId){this.serviceDetailInfo.categoryOneName=n.categoryName,this.serviceDetailInfo.categoryTwoId="",this.secondCateList=n.childrenList;break}}}catch(r){t=!0,s=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw s}}},getSecondCate:function(){var e=!0,t=!1,s=void 0;try{for(var a,i=this.secondCateList[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.id==this.serviceDetailInfo.categoryTwoId){this.serviceDetailInfo.categoryTwoName=n.categoryName;break}}}catch(r){t=!0,s=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw s}}},getServiceDetail:function(e){var t=this;Object(o["I"])({id:e}).then((function(e){t.serviceDetailInfo=e.data,t.selectedOptions=[t.serviceDetailInfo.province,t.serviceDetailInfo.city,t.serviceDetailInfo.area]}))},getDetail:function(){console.log("ooooo",this.content)},back:function(){this.$router.go(-1)},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,s="image/png"===e.type,a=e.size/1024<30;return t||s||this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 30k!"),t&&a},linkChange:function(){this.defaultLink=this.hrefType},getTag:function(){},save:function(){var e=this;this.serviceDetailInfo.servicePic=this.url,this.serviceDetailInfo.publish=0,this.serviceDetailInfo.id?Object(o["T"])(this.serviceDetailInfo).then((function(t){200==t.code?(e.$message.success("修改成功"),e.$router.push({path:"/service"})):e.$message.warning(t.msg)})):Object(o["S"])(this.serviceDetailInfo).then((function(t){200==t.code?(e.$message.success("添加成功"),e.$router.push({path:"/service"})):e.$message.warning(t.msg)}))},publish:function(){this.serviceDetailInfo.publish="1",this.save()},serviceDelete:function(){var e=this;this.$confirm("此操作将永久删除该服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){deleteService({id:e.serviceDetailInfo.id}).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.$router.push("/service"))}))})).catch((function(){e.$message.info("已取消删除")}))},getPrice:function(){var e=this;this.$rules.validatePrice(this.serviceDetailInfo.servicePrice,(function(t){e.priceTip=t}))},getbusiness:function(){var e=this,t={id:this.serviceDetailInfo.businessId,businessName:""};Object(o["Q"])(t).then((function(t){e.serviceDetailInfo.businessName=t.data[0].businessName}))},getName:function(e){this.serviceDetailInfo.businessName=e},businessSelect:function(e){this.serviceDetailInfo.businessName=e.value,this.serviceDetailInfo.businessId=e.id},getNewTags:function(e,t){this.serviceDetailInfo.keyWordName=e,this.serviceDetailInfo.keyWordId=t,this.serviceDetailInfo.keyWordName.length>0&&(this.serviceDetailInfo.keyWordName=this.serviceDetailInfo.keyWordName.substring(0,this.serviceDetailInfo.keyWordName.length-1),this.serviceDetailInfo.keyWordId=this.serviceDetailInfo.keyWordId.substring(0,this.serviceDetailInfo.keyWordId.length-1))}}},u=d,v=(s("c352"),s("2877")),f=Object(v["a"])(u,a,i,!1,null,"47d5d7d8",null);t["default"]=f.exports},c352:function(e,t,s){"use strict";var a=s("e74c"),i=s.n(a);i.a},e74c:function(e,t,s){}}]);