(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7434b1dc"],{"1de5":function(t,e,s){"use strict";var i=s("e4d4"),a=s.n(i);a.a},"498a":function(t,e,s){"use strict";var i=s("23e7"),a=s("58a8").trim,n=s("e070");i({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},"4e82":function(t,e,s){"use strict";var i=s("23e7"),a=s("1c0b"),n=s("7b0b"),o=s("d039"),l=s("b301"),r=[].sort,d=[1,2,3],c=o((function(){d.sort(void 0)})),u=o((function(){d.sort(null)})),p=l("sort"),h=c||!u||p;i({target:"Array",proto:!0,forced:h},{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),a(t))}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var i=s("1d80"),a=s("5899"),n="["+a+"]",o=RegExp("^"+n+n+"*"),l=RegExp(n+n+"*$"),r=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(l,"")),s}};t.exports={start:r(1),end:r(2),trim:r(3)}},8418:function(t,e,s){"use strict";var i=s("c04e"),a=s("9bf2"),n=s("5c6c");t.exports=function(t,e,s){var o=i(e);o in t?a.f(t,o,n(0,s)):t[o]=s}},"898e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"distribute-detail"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"status_type"},[t._v("标题 "),s("span",{staticClass:"star"},[t._v("*")])]),s("el-input",{attrs:{placeholder:"10个字以内",maxlength:"10","show-word-limit":""},model:{value:t.dispenseInfo.navigationTitle,callback:function(e){t.$set(t.dispenseInfo,"navigationTitle",e)},expression:"dispenseInfo.navigationTitle"}})],1)])],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"status_type",staticStyle:{"line-height":"55px"}},[t._v("描述 "),s("span",{staticClass:"star"},[t._v("*")])]),s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"30个字以内",maxlength:"30","show-word-limit":""},model:{value:t.dispenseInfo.description,callback:function(e){t.$set(t.dispenseInfo,"description",e)},expression:"dispenseInfo.description"}})],1)])],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"status_type"},[t._v("是否启用 "),s("span",{staticClass:"star"},[t._v("*")])]),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dispenseInfo.enable,callback:function(e){t.$set(t.dispenseInfo,"enable",e)},expression:"dispenseInfo.enable"}},t._l(t.statusList,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"status_type"},[t._v("一级类目 "),s("span",{staticClass:"star"},[t._v("*")])]),s("el-select",{attrs:{placeholder:"请选择一级目录"},model:{value:t.dispenseInfo.categoryOneId,callback:function(e){t.$set(t.dispenseInfo,"categoryOneId",e)},expression:"dispenseInfo.categoryOneId"}},t._l(t.categoryOneList,(function(t,e){return s("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})})),1)],1)])],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"status_type"},[t._v("排序 "),s("span",{staticClass:"star"},[t._v("*")])]),s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dispenseInfo.sort,callback:function(e){t.$set(t.dispenseInfo,"sort",e)},expression:"dispenseInfo.sort"}})],1)])],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"grid-content bg-purple"},[s("span",{staticClass:"status_type"},[t._v("最近更新时间")]),s("span",{staticClass:"status_type",staticStyle:{"text-align":"left",width:"76%"}},[t._v(t._s(t._f("formatDate")(t.dispenseInfo.updateTime)))])]),s("el-divider")],1)],1),s("el-row",{staticClass:"table-row",attrs:{gutter:20}},[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"add-wrap"},[s("el-button",{attrs:{size:"mini"},on:{click:t.addKeyword}},[t._v("新增")])],1),s("div",{staticClass:"grid-content bg-purple"},[s("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.dispenseTwoData,border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),s("el-table-column",{attrs:{prop:"title",label:"配置词",width:"100"}}),s("el-table-column",{attrs:{prop:"categoryName",label:"二级类目",width:"120"}}),s("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(1==i.label?"热标":2==i.label?"新标":"无"))])]}}])}),s("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80"}}),s("el-table-column",{attrs:{prop:"keyWordName",label:"关键词"}}),s("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.keywordEdit(e.$index,e.row)}}},[t._v("编辑")]),s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.keywordDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)])],1),s("el-row",{staticClass:"btn-wrap",attrs:{gutter:20}},[s("el-col",{attrs:{span:3,offset:9}},[s("div",{staticClass:"grid-content bg-purple",staticStyle:{display:"flex","justify-content":"space-between"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)]),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple",staticStyle:{display:"flex","justify-content":"space-between"}},[s("el-button",{on:{click:t.back}},[t._v("取消")])],1)])],1),s("el-dialog",{attrs:{title:"关键词明细",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"name"},[s("span",{staticClass:"key-title"},[t._v("标题"),s("span",{staticClass:"star"},[t._v("*")])]),s("el-input",{attrs:{placeholder:"10个字以内",maxlength:"10","show-word-limit":""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),s("div",{staticClass:"name"},[s("span",{staticClass:"key-title"},[t._v("二级类目"),s("span",{staticClass:"star"},[t._v("*")])]),s("el-select",{attrs:{placeholder:"请选择二级类目"},model:{value:t.categoryTwoId,callback:function(e){t.categoryTwoId=e},expression:"categoryTwoId"}},t._l(t.categoryTwoList,(function(t,e){return s("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})})),1)],1),s("div",{staticClass:"name"},[s("span",{staticClass:"key-title"},[t._v("是否展示标签"),s("span",{staticClass:"star"},[t._v("*")])]),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.enable,callback:function(e){t.enable=e},expression:"enable"}},t._l(t.tagsList,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("div",{staticClass:"name"},[s("span",{staticClass:"key-title"},[t._v("排序"),s("span",{staticClass:"star"},[t._v("*")])]),s("el-input",{attrs:{placeholder:"10个字以内",maxlength:"10","show-word-limit":""},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}})],1),s("el-divider"),s("div",{staticClass:"add-wrap"},[s("el-button",{attrs:{size:"mini"},on:{click:t.addKeywordDetail}},[t._v("新增")])],1),s("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#000"},data:t.tableData,border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),s("el-table-column",{attrs:{label:"配置词",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,a=e.row;return[t.showEdit[i]?s("el-input",{staticClass:"congigKeyword",model:{value:a.title,callback:function(e){t.$set(a,"title",e)},expression:"row.title"}}):t._e(),t.showEdit[i]?t._e():s("span",[t._v(t._s(a.title))])]}}])}),s("el-table-column",{attrs:{prop:"address",label:"跳转类型",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,a=e.row;return[t.showEdit[i]?s("el-select",{staticClass:"congigKeyword",attrs:{placeholder:"请选择"},model:{value:a.forwardType,callback:function(e){t.$set(a,"forwardType",e)},expression:"row.forwardType"}},t._l(t.forwardTypeOptions,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),t.showEdit[i]?t._e():s("span",[t._v(t._s("1"==a.forwardType?"关键词":"地址"))])]}}])}),s("el-table-column",{attrs:{label:"关键词/地址"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,a=e.row;return[t.showEdit[i]&&"1"==a.forwardType?s("el-select",{staticClass:"congigKeyword",attrs:{placeholder:"请选择"},model:{value:a.content,callback:function(e){t.$set(a,"content",e)},expression:"row.content"}},t._l(t.cateTwoKeywords,(function(t,e){return s("el-option",{key:e,attrs:{label:t.keyWordName,value:t.id}})})),1):t._e(),t.showEdit[i]&&"2"==a.forwardType?s("el-input",{staticClass:"congigKeyword",model:{value:a.content,callback:function(e){t.$set(a,"content",e)},expression:"row.content"}}):t._e(),t.showEdit[i]||"1"!=a.forwardType?t._e():s("span",[t._v(t._s(t._f("getCateName")(a.content,t.cateTwoKeywords)))]),t.showEdit[i]||"2"!=a.forwardType?t._e():s("span",[t._v(t._s(a.content))])]}}])}),s("el-table-column",{attrs:{label:"标签",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,a=e.row;return[t.showEdit[i]?s("el-select",{staticClass:"congigKeyword",attrs:{placeholder:"请选择"},model:{value:a.lable,callback:function(e){t.$set(a,"lable",e)},expression:"row.lable"}},t._l(t.labelOptions,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),t.showEdit[i]?t._e():s("span",[t._v(t._s("1"==a.lable?"热标":"新标"))])]}}])}),s("el-table-column",{attrs:{label:"排序",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,a=e.row;return[t.showEdit[i]?s("el-input",{staticClass:"congigKeyword",model:{value:a.sort,callback:function(e){t.$set(a,"sort",e)},expression:"row.sort"}}):t._e(),t.showEdit[i]?t._e():s("span",[t._v(t._s(a.sort))])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,a=e.row;return[t.showBtn[i]?t._e():s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(i,a)}}},[t._v("编辑")]),t.showBtn[i]?s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleSubmit(i,a)}}},[t._v("保存")]):t._e(),t.showBtn[i]?s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleCancel(i,a)}}},[t._v("取消")]):t._e(),s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleDelete(i,a)}}},[t._v("删除")])]}}])})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveKeywordDetail}},[t._v("保存")])],1)],1)],1)},a=[],n=(s("a4d3"),s("e01a"),s("d28b"),s("4e82"),s("a434"),s("d3b7"),s("3ca3"),s("498a"),s("ddb0"),s("1273")),o={data:function(){return{dispenseInfo:{categoryOneId:"",description:"",enable:1,id:"",navigationTitle:"",sort:0,updateTime:""},dialogVisible:!1,inputVisible:!1,inputValue:"",categoryOneList:[],statusList:[{label:"是",value:1},{label:"否",value:0}],tableData:[],dispenseTwoData:[],enable:1,tagsList:[{label:"是",value:1},{label:"否",value:0}],categoryTwoId:"",categoryTwoList:[],sort:"",title:"",dispenseId:"",keywordId:"",showEdit:[],showBtn:[],forwardTypeOptions:[{label:"关键词",value:"1"},{label:"地址",value:"2"}],mode:!1,labelOptions:[{label:"无",value:"0"},{label:"热标",value:"1"}],cateTwoKeywords:[],cateTwoKeyword:""}},computed:{dispenseDetail:function(){return this.$store.state.dispenseDetail}},mounted:function(){this.dispenseDetail.id?(this.dispenseId=this.dispenseDetail.id,this.dispenseInfo.navigationTitle=this.dispenseDetail.navigationTitle,this.dispenseInfo.id=this.dispenseDetail.id,this.dispenseInfo.description=this.dispenseDetail.description,this.dispenseInfo.categoryOneId=this.dispenseDetail.categoryOneId,this.dispenseInfo.enable=this.dispenseDetail.enable,this.dispenseInfo.sort=this.dispenseDetail.sort,this.dispenseInfo.updateTime=this.dispenseDetail.updateTime,this.getDispenseTwo(this.dispenseDetail.id),this.$store.commit("saveDispenseDetail","")):this.dispenseInfo.id="",this.getAllCates();for(var t=0;t<this.tableData.length;t++)this.showEdit[t]=!1,this.showBtn[t]=!1},methods:{getAllCates:function(){var t=this;Object(n["M"])({}).then((function(e){e.data&&(t.categoryOneList=e.data)}))},getDispenseTwo:function(t){var e=this;Object(n["Q"])({id:t}).then((function(t){e.dispenseTwoData=t.data}))},handleClose:function(){this.dialogVisible=!1},back:function(){this.$router.go(-1)},addRelation:function(){var t=this;if(!this.relationName.trim())return this.$message({message:"请输入关联关键词！!",type:"warning",center:!0}),!1;var e={id:"",keyWordRelationname:this.relationName};addKeywordRelation(e).then((function(e){if(200!=e.code)return t.$message({message:"请输入关联关键词！!",type:"warning",center:!0}),!1;var s={};t.relateKeywordList.unshift(t.relationName),s={id:e.msg,keyWordRelationname:t.relationName},t.keyWordRelationname.unshift(s),t.relationName="",t.$message({message:"添加成功!",type:"success",center:!0})}))},save:function(){var t=this;if(!this.dispenseInfo.navigationTitle)return this.$message.warning("请输入标题"),!1;if(!this.dispenseInfo.categoryOneId)return this.$message.warning("请选择一级类目"),!1;if(!this.dispenseInfo.sort)return this.$message.warning("请输入排序"),!1;var e={id:this.dispenseInfo.id,navigationTitle:this.dispenseInfo.navigationTitle,description:this.dispenseInfo.description,categoryOneId:this.dispenseInfo.categoryOneId,enable:this.dispenseInfo.enable,sort:this.dispenseInfo.sort};Object(n["a"])(e).then((function(e){200==e.code?(t.$message.success("添加成功"),t.$router.push("/home")):t.$message.warning(e.msg)}))},addKeywordDetail:function(){this.mode=!0,this.tableData.push({addressId:this.keywordId,content:"",forwardType:"1",id:"",lable:"1",sort:0,title:""}),this.showEdit[this.tableData.length-1]=!0,this.showBtn[this.tableData.length-1]=!0,this.$set(this.showEdit,this.tableData.length-1,!0),this.$set(this.showBtn,this.tableData.length-1,!0)},addKeyword:function(){this.dialogVisible=!0,this.title="",this.categoryTwoId="",this.enable="",this.sort="";var t=!0,e=!1,s=void 0;try{for(var i,a=this.categoryOneList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var n=i.value;n.id==this.dispenseInfo.categoryOneId&&(this.categoryTwoList=n.childrenList)}}catch(o){e=!0,s=o}finally{try{t||null==a.return||a.return()}finally{if(e)throw s}}},saveKeywordDetail:function(){var t=this;if(!this.dispenseInfo.id)return this.$message.warning("请先添加热搜词"),!1;if(!this.title)return this.$message.warning("请输入标题"),!1;if(!this.categoryTwoId)return this.$message.warning("请选择二级类目"),!1;if(!this.sort)return this.$message.warning("请输入排序"),!1;var e={parentId:this.dispenseInfo.id,sort:this.sort,categoryTwoId:this.categoryTwoId,content:this.categoryTwoId,title:this.title,label:this.enable};Object(n["b"])(e).then((function(e){200==e.code?(t.$message.success("添加成功"),t.dialogVisible=!1,t.getDispenseTwo(t.dispenseId)):t.$message.warning(e.msg)}))},keywordEdit:function(t,e){var s=this,i=!0,a=!1,o=void 0;try{for(var l,r=this.categoryOneList[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var d=l.value;d.id==this.dispenseInfo.categoryOneId&&(this.categoryTwoList=d.childrenList)}}catch(c){a=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}this.dialogVisible=!0,this.keywordId=e.id,this.title=e.title,this.categoryTwoId=e.content,this.sort=e.sort,this.tagId=e.label,Object(n["C"])({id:this.categoryTwoId}).then((function(t){s.cateTwoKeywords=t.data})),this.loadAllKey(e.id)},keywordDelete:function(t,e){var s=this;this.$confirm("此操作将永久删除该关键词, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["o"])({id:e.id}).then((function(t){200==t.code?(s.$message({type:"success",message:"删除成功!"}),s.getDispenseTwo(s.dispenseId)):s.$message.warning(t.msg)}))})).catch((function(){s.$message({type:"info",message:"已取消删除"})}))},loadAllKey:function(t){var e=this;Object(n["A"])({id:t}).then((function(t){e.tableData=t.data}))},handleEdit:function(t,e){if(!this.categoryTwoId)return this.$message.warning("请先添加关键词明细"),!1;this.showEdit[t]=!0,this.showBtn[t]=!0,this.$set(this.showEdit,t,!0),this.$set(this.showBtn,t,!0)},handleSubmit:function(t,e){var s=this,i={};i={addressId:e.addressId,content:e.content,forwardType:e.forwardType,id:e.id,lable:e.label,sort:e.sort,title:e.title},this.showEdit[t]=!1,this.showBtn[t]=!1,this.$set(this.showEdit,t,!1),this.$set(this.showBtn,t,!1),Object(n["f"])(i).then((function(t){200==t.code?(s.$message.success("添加成功"),s.loadAllKey(s.keywordId)):(s.$message.warning(t.msg),s.loadAllKey(e.id))}))},handleCancel:function(t,e){this.mode?(this.tableData.splice(t,1),this.mode=!1):(this.showEdit[t]=!1,this.showBtn[t]=!1,this.$set(this.showEdit,t,!1),this.$set(this.showBtn,t,!1))},handleDelete:function(t,e){var s=this;this.$confirm("此操作将永久删除该配置词, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["q"])({id:e.id}).then((function(t){200==t.code?(s.$message({type:"success",message:"删除成功!"}),s.loadAllKey(s.keywordId)):s.$message.warning(t.msg)}))})).catch((function(){s.$message({type:"info",message:"已取消删除"})}))}}},l=o,r=(s("1de5"),s("e268"),s("2877")),d=Object(r["a"])(l,i,a,!1,null,"29162562",null);e["default"]=d.exports},a434:function(t,e,s){"use strict";var i=s("23e7"),a=s("23cb"),n=s("a691"),o=s("50c4"),l=s("7b0b"),r=s("65f0"),d=s("8418"),c=s("1dde"),u=Math.max,p=Math.min,h=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!c("splice")},{splice:function(t,e){var s,i,c,w,g,b,v=l(this),y=o(v.length),m=a(t,y),_=arguments.length;if(0===_?s=i=0:1===_?(s=0,i=y-m):(s=_-2,i=p(u(n(e),0),y-m)),y+s-i>h)throw TypeError(f);for(c=r(v,i),w=0;w<i;w++)g=m+w,g in v&&d(c,w,v[g]);if(c.length=i,s<i){for(w=m;w<y-i;w++)g=w+i,b=w+s,g in v?v[b]=v[g]:delete v[b];for(w=y;w>y-i+s;w--)delete v[w-1]}else if(s>i)for(w=y-i;w>m;w--)g=w+i-1,b=w+s-1,g in v?v[b]=v[g]:delete v[b];for(w=0;w<s;w++)v[w+m]=arguments[w+2];return v.length=y-i+s,c}})},d3dd:function(t,e,s){},e070:function(t,e,s){var i=s("d039"),a=s("5899"),n="​᠎";t.exports=function(t){return i((function(){return!!a[t]()||n[t]()!=n||a[t].name!==t}))}},e268:function(t,e,s){"use strict";var i=s("d3dd"),a=s.n(i);a.a},e4d4:function(t,e,s){}}]);